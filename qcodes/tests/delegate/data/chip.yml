instruments:
  MockChip_123:
    type: qcodes.instrument.delegate.InstrumentGroup
    init:
      submodules_type: qcodes.instrument.delegate.DelegateInstrument
      submodules:
        device1:
          parameters:
            gate: dac.ch01.voltage
            source:
              - lockin.frequency
              - lockin.amplitude
              - lockin.phase
              - lockin.time_constant
            drain:
              - lockin.X
              - lockin.Y

        channel_device:
          parameters:
            readout: lockin.phase
          channels:
            gate_1: dac.ch01

        channel_device_custom:
          parameters:
            readout: lockin.phase
          channels:
            gate_1:
              channel: dac.ch01
              type: qcodes.tests.instrument_mocks.MockCustomChannel
              current_valid_range: [-0.5, 0]
            fast_gate:
              channel: dac.ch02
              type: qcodes.tests.instrument_mocks.DummyChannel

      set_initial_values_on_load: true
      initial_values:
        device1:
          gate.step: 5e-4
          gate.inter_delay: 12.5e-4
        channel_device:
          readout: 1e-5
          gate_1.voltage.post_delay: 0.01
        channel_device_custom:
          readout: 1e-5

  field:
    type: qcodes.instrument.delegate.DelegateInstrument
    init:
      parameters:
        X: field_x.field
        ramp_rate: field_x.ramp_rate
        ramp_X:
          - field_x.ramp_rate
          - field_x.field
      set_initial_values_on_load: true
      initial_values:
        ramp_rate: 0.02
      setters:
        X:
          method: field_x.set_field
          block: false
      units:
        X: T
        ramp_rate: T/min

  switch:
    type: qcodes.instrument.delegate.DelegateChannelInstrument
    init:
      channels: dac.channels
      parameters:
        state:
          - dac_output
          - smc
          - gnd
          - bus
