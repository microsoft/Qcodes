spec: "1.0"
devices:
  cryomagnetics_4g:
    eom:
      GPIB INSTR:
        q: "\n"
        r: "\n"
        error: ERROR
    dialogues:
      - q: "*IDN?"
        r: "Cryomagnetics,4G,2239,1.02,208"
      - q: "*STB?"
        r: "0"
      - q: "REMOTE"
    properties:
      unit:
        default: "T"
        getter:
          q: "UNITS?"
          r: "{}"
        setter:
          q: "UNITS {}"
        specs:
          type: str
          valid: ["T", "A", "kG"]
      field:
        default: 0.0
        getter:
          q: "IMAG?"
          r: "{} kG"
        setter:
          q: "IMAG {}"
        specs:
          type: float
      ramp_field_up:
        default: 0.0
        setter:
          q: "ULIM {}"
        specs:
          type: float
      ramp_field_down:
        default: 0.0
        setter:
          q: "LLIM {}"
        specs:
          type: float
      sweep_direction:
        default: "UP"
        setter:
          q: "SWEEP {}"
        specs:
          type: str
          valid: ["UP", "DOWN"]
      ramp_rate:
        default: 0.0
        getter:
          q: "RATE?"
          r: "{}"
        setter:
          q: "RATE {}"
        specs:
          type: float
      magnet_voltage:
        default: 0.0
        getter:
          q: "VMAG?"
          r: "{}"
        specs:
          type: float
      output_voltage:
        default: 0.0
        getter:
          q: "VOUT?"
          r: "{}"
        specs:
          type: float
      output_current:
        default: 0.0
        getter:
          q: "IOUT?"
          r: "{}"
        specs:
          type: float
    current_limits:
      range:
        ids: [1, 2, 3, 4, 5, 6]
        properties:
          range:
            default: 0.0
            setter:
              q: "RANGE {range_id} {}"
            specs:
              type: float
          rate:
            default: 0.0
            getter:
              q: "RATE? {range_id}"
            setter:
              q: "RATE {range_id} {}"
            specs:
              type: float

resources:
  GPIB::1::INSTR:
    device: cryomagnetics_4g
