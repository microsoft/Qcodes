spec: "1.1"
devices:
  SR830:
    eom:
      GPIB INSTR:
        q: "\n"
        r: "\n"
    error: ERROR
    dialogues:
      - q: "*IDN?"
        r: "QCoDeS, Standford Research 830 simulation, 1337, 0.0.01"

    properties:

      isrc:
        default: '0'
        getter:
          q: 'ISRC?'
          r: '0'
        setter:
          q: 'ISRC {}'
          r: OK

      change display channel 1:
        getter:
          q: 'DDEF ? 1'
          r: '0, 0'
        setter:
          q: 'DDEF 1, 0, 0'
          r: OK

      change display channel 2:
        getter:
          q: 'DDEF ? 2'
          r: '0, 0'
        setter:
          q: 'DDEF 2, 0, 0'
          r: OK

      buffer setup:
        getter:
          q: 'SRAT ?'
          r: '13'
        setter:
          q: 'SRAT 13'
          r: OK

      reset:
        setter:
          q: 'REST'
          r: OK

      start:
        setter:
          q: 'STRT'
          r: OK

      pause:
        setter:
          q: 'PAUS'
          r: OK

      number of stored points:
        getter:
          q: 'SPTS ?'
          r: '1000'

      poll binary data channel 1:
        getter:
          q: 'TRCL ? 1, 0, 1000'
          r: !!binary |

            R0lGODlhDAAMAIQAAP//9/X17unp5WZmZgAAAOfn515eXvPz7Y6OjuDg4J+fn5OTk6enp56enmlpaWNjY6Ojo4SEhP/++f/++f/++f/++f/++f/++f/++f/++f/++f/++f/++f/++f/++f/++SH+Dk1hZGUgd2l0aCBHSU1QACwAAAAADAAMAAAFLCAgjoEwnuNAFOhpEMTRiggcz4BNJHrv/zCFcLiwMWYNG84BwwEeECcgggoBADs=

resources:
  GPIB::1::INSTR:
    device: SR830
